<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="R.Y">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="R.Y">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="R.Y">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/">





  <title>R.Y</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">R.Y</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/18/AJAX/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="R.Y">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/dog.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="R.Y">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/18/AJAX/" itemprop="url">AJAX</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-03-18T14:52:41+08:00">
                2019-03-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="AJAX-Async-JavaScript-And-XML"><a href="#AJAX-Async-JavaScript-And-XML" class="headerlink" title="AJAX (Async JavaScript And XML)"></a>AJAX (Async JavaScript And XML)</h2><h3 id="Jesse-James-Garrett-讲如下技术取名叫做-AJAX：异步的-JavaScript-和-XML"><a href="#Jesse-James-Garrett-讲如下技术取名叫做-AJAX：异步的-JavaScript-和-XML" class="headerlink" title="Jesse James Garrett 讲如下技术取名叫做 AJAX：异步的 JavaScript 和 XML"></a>Jesse James Garrett 讲如下技术取名叫做 AJAX：异步的 JavaScript 和 XML</h3><ol>
<li>使用 XMLHttpRequest 发请求</li>
<li>服务器返回 XML 格式的字符串</li>
<li>JS 解析 XML，并更新局部页面</li>
</ol>
<h3 id="如何发请求"><a href="#如何发请求" class="headerlink" title="如何发请求"></a>如何发请求</h3><h3 id="1-用-form-可以发请求，但是会刷新页面或新开页面"><a href="#1-用-form-可以发请求，但是会刷新页面或新开页面" class="headerlink" title="1.用 form 可以发请求，但是会刷新页面或新开页面"></a>1.用 form 可以发请求，但是会刷新页面或新开页面</h3><h5 id="发-get-请求"><a href="#发-get-请求" class="headerlink" title="发 get 请求"></a>发 <code>get</code> 请求</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/xxx"</span> <span class="attr">method</span>=<span class="string">"get"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>输入111 点击提交<br><img src="/img/AJAX/1.png" alt="输入111"></p>
<p>可以在控制台中看到 <code>Request Headers</code>(点view source)<br><img src="/img/AJAX/2.png" alt="点view source"></p>
<h5 id="发-post-请求"><a href="#发-post-请求" class="headerlink" title="发 post 请求"></a>发 <code>post</code> 请求</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/xxx"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>输入123 点击提交<br>同样在控制台查看，可以看到 <code>post</code> 后面没有查询参数(点view source)<br><img src="/img/AJAX/3.png" alt="点view source"></p>
<p>可以在 第四部分 <code>Form Data</code> 看到<br><img src="/img/AJAX/4.png" alt="点view source"></p>
<h3 id="2-用-a-可以发-get-请求，但是也会刷新页面或新开页面"><a href="#2-用-a-可以发-get-请求，但是也会刷新页面或新开页面" class="headerlink" title="2.用 a 可以发 get 请求，但是也会刷新页面或新开页面"></a>2.用 a 可以发 get 请求，但是也会刷新页面或新开页面</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/xxx"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line">    	x.click()</span><br><span class="line">  	<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/img/AJAX/5.png" alt="点view source"></p>
<h3 id="3-用-img-可以发-get-请求，但是只能以图片的形式展示"><a href="#3-用-img-可以发-get-请求，但是只能以图片的形式展示" class="headerlink" title="3.用 img 可以发 get 请求，但是只能以图片的形式展示"></a>3.用 img 可以发 get 请求，但是只能以图片的形式展示</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> img = <span class="built_in">document</span>.createElement(<span class="string">'img'</span>)</span><br><span class="line">img.src = <span class="string">'/xxx'</span></span><br></pre></td></tr></table></figure>

<p><img src="/img/AJAX/6.png" alt="点view source"></p>
<h3 id="4-用-link-可以发-get-请求，但是只能以-CSS、favicon-的形式展示"><a href="#4-用-link-可以发-get-请求，但是只能以-CSS、favicon-的形式展示" class="headerlink" title="4.用 link 可以发 get 请求，但是只能以 CSS、favicon 的形式展示"></a>4.用 link 可以发 get 请求，但是只能以 CSS、favicon 的形式展示</h3><p><img src="/img/AJAX/7.png" alt="点view source"></p>
<h3 id="5-用-script-可以发-get-请求，但是只能以脚本的形式运行"><a href="#5-用-script-可以发-get-请求，但是只能以脚本的形式运行" class="headerlink" title="5.用 script 可以发 get 请求，但是只能以脚本的形式运行"></a>5.用 script 可以发 get 请求，但是只能以脚本的形式运行</h3><p><img src="/img/AJAX/8.png" alt="点view source"></p>
<p>有没有什么方式可以实现</p>
<p>get、post、put、delete 请求都行<br>想以什么形式展示就以什么形式展示</p>
<h3 id="XMLHttpRequest"><a href="#XMLHttpRequest" class="headerlink" title="XMLHttpRequest"></a>XMLHttpRequest</h3><p>IE 5 率先在 JS 中引入 ActiveX 对象（API），使得 JS 可以直接发起 HTTP 请求。<br>随后 Mozilla、 Safari、 Opera 也跟进（抄袭）了，取名 <code>XMLHttpRequest</code>，并被纳入 W3C 规范</p>
<h3 id="原生js发AJAX请求："><a href="#原生js发AJAX请求：" class="headerlink" title="原生js发AJAX请求："></a>原生js发AJAX请求：</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> request = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line">request.open(<span class="string">'GET'</span>, <span class="string">'/xxx'</span>) <span class="comment">//初始化 request</span></span><br><span class="line">request.send()</span><br><span class="line">request.onreadystatechange = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">	<span class="keyword">if</span>(request.readyState === <span class="number">4</span>)&#123; <span class="comment">//请求相应完毕</span></span><br><span class="line">		<span class="keyword">if</span>(request.status &gt;= <span class="number">200</span> &amp;&amp; request.status &lt;= <span class="number">3</span> <span class="number">00</span>)&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'请求成功'</span>)</span><br><span class="line">			<span class="keyword">let</span> string = request.responseText</span><br><span class="line">			<span class="keyword">let</span> object = <span class="built_in">window</span>.JSON.parse(string)</span><br><span class="line">		&#125;<span class="keyword">else</span> <span class="keyword">if</span>(request.status &gt;= <span class="number">400</span>)&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'请求失败'</span>)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="CORS-跨源资源共享-Cross-Origin-Resource-Sharing"><a href="#CORS-跨源资源共享-Cross-Origin-Resource-Sharing" class="headerlink" title="CORS 跨源资源共享 (Cross-Origin Resource Sharing)"></a>CORS 跨源资源共享 (Cross-Origin Resource Sharing)</h2><h4 id="使用方法如下："><a href="#使用方法如下：" class="headerlink" title="使用方法如下："></a>使用方法如下：</h4><h4 id="Access-Control-Allow-Origin是HTML5中定义的一种解决资源跨域的策略。"><a href="#Access-Control-Allow-Origin是HTML5中定义的一种解决资源跨域的策略。" class="headerlink" title="Access-Control-Allow-Origin是HTML5中定义的一种解决资源跨域的策略。"></a>Access-Control-Allow-Origin是HTML5中定义的一种解决资源跨域的策略。</h4><p><img src="/img/AJAX/9.png" alt="点view source"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/14/注册登录与cookie/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="R.Y">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/dog.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="R.Y">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/14/注册登录与cookie/" itemprop="url">注册登录与cookie</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-14T13:43:35+08:00">
                2018-12-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><h4 id="首先建立一个-server-js-和-一个-index-html-文件"><a href="#首先建立一个-server-js-和-一个-index-html-文件" class="headerlink" title="首先建立一个 server.js  和 一个 index.html 文件"></a>首先建立一个 <code>server.js</code>  和 一个 <code>index.html</code> 文件</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>)</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"><span class="keyword">var</span> url = <span class="built_in">require</span>(<span class="string">'url'</span>)</span><br><span class="line"><span class="keyword">var</span> port = process.argv[<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(!port)&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'请指定端口号好不啦？\nnode server.js 8888 这样不会吗？'</span>)</span><br><span class="line">  process.exit(<span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> server = http.createServer(<span class="function"><span class="keyword">function</span>(<span class="params">request, response</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> parsedUrl = url.parse(request.url, <span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">var</span> pathWithQuery = request.url</span><br><span class="line">  <span class="keyword">var</span> queryString = <span class="string">''</span></span><br><span class="line">  <span class="keyword">if</span>(pathWithQuery.indexOf(<span class="string">'?'</span>) &gt;= <span class="number">0</span>)&#123; queryString = pathWithQuery.substring(pathWithQuery.indexOf(<span class="string">'?'</span>)) &#125;</span><br><span class="line">  <span class="keyword">var</span> path = parsedUrl.pathname</span><br><span class="line">  <span class="keyword">var</span> query = parsedUrl.query</span><br><span class="line">  <span class="keyword">var</span> method = request.method</span><br><span class="line"></span><br><span class="line">  <span class="comment">/******** 从这里开始看，上面不要看 ************/</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'得到 HTTP 路径\n'</span> + path)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(path === <span class="string">'/'</span>)&#123;</span><br><span class="line">  <span class="keyword">var</span> string = fs.readFileSync(<span class="string">'./index.html'</span>,<span class="string">'utf8'</span>)</span><br><span class="line">  response.statusCode = <span class="number">200</span></span><br><span class="line">  response.setHeader(<span class="string">'Content-Type'</span>,<span class="string">'text/html; charset=utf-8'</span>)</span><br><span class="line">  response.write(string)</span><br><span class="line">  response.end()</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(path === <span class="string">'/main.js'</span>)&#123;</span><br><span class="line">  <span class="keyword">var</span> string = fs.readFileSync(<span class="string">'./main.js'</span>,<span class="string">'utf8'</span>)</span><br><span class="line">  response.statusCode = <span class="number">200</span></span><br><span class="line">  response.setHeader(<span class="string">'Content-Type'</span>,<span class="string">'text/javascript; charset=utf-8'</span>)</span><br><span class="line">  response.write(string)</span><br><span class="line">  response.end()</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(path === <span class="string">'/jQuery-ajax.js'</span>)&#123;</span><br><span class="line">  <span class="keyword">var</span> string = fs.readFileSync(<span class="string">'./jQuery-ajax.js'</span>,<span class="string">'utf8'</span>)</span><br><span class="line">  response.statusCode = <span class="number">200</span></span><br><span class="line">  response.setHeader(<span class="string">'Content-Type'</span>,<span class="string">'text/javascript; charset=utf-8'</span>)</span><br><span class="line">  response.write(string)</span><br><span class="line">  response.end()</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(path === <span class="string">'/promise.js'</span>)&#123;</span><br><span class="line">  <span class="keyword">var</span> string = fs.readFileSync(<span class="string">'./promise.js'</span>,<span class="string">'utf8'</span>)</span><br><span class="line">  response.statusCode = <span class="number">200</span></span><br><span class="line">  response.setHeader(<span class="string">'Content-Type'</span>,<span class="string">'text/javascript; charset=utf-8'</span>)</span><br><span class="line">  response.write(string)</span><br><span class="line">  response.end()</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">  response.statusCode = <span class="number">404</span></span><br><span class="line">  response.setHeader(<span class="string">'Content-Type'</span>, <span class="string">'text/html;charset=utf-8'</span>)</span><br><span class="line">  response.write(<span class="string">`</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">      "error": "not found"</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  `</span>)</span><br><span class="line">  response.end()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/******** 代码结束，下面不要看 ************/</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">server.listen(port)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'监听 '</span> + port + <span class="string">' 成功\n请用在空中转体720度然后用电饭煲打开 http://localhost:'</span> + port)</span><br></pre></td></tr></table></figure>

<h4 id="我们要加入一个-注册-页面的路由，创建-sign-up-html-文件"><a href="#我们要加入一个-注册-页面的路由，创建-sign-up-html-文件" class="headerlink" title="我们要加入一个 注册 页面的路由，创建 sign_up.html 文件"></a>我们要加入一个 注册 页面的路由，创建 <code>sign_up.html</code> 文件</h4><h5 id="sign-up-html"><a href="#sign-up-html" class="headerlink" title="sign_up.html"></a>sign_up.html</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line">		*&#123;</span><br><span class="line">			margin: 0;</span><br><span class="line">			padding: 0;</span><br><span class="line">			box-sizing: border-box;</span><br><span class="line">		&#125;</span><br><span class="line">		body&#123;</span><br><span class="line">			border: 1px solid red;</span><br><span class="line">			height: 100vh;</span><br><span class="line">			display: flex;</span><br><span class="line">			justify-content: center;</span><br><span class="line">			align-items: center;</span><br><span class="line">		&#125;</span><br><span class="line"><span class="css">		<span class="selector-class">.form-wrapper</span>&#123;</span></span><br><span class="line">			min-width: 350px;</span><br><span class="line">			padding: 20px;</span><br><span class="line"><span class="css">			<span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#ddd</span>;</span></span><br><span class="line">		&#125;</span><br><span class="line"><span class="css">		<span class="selector-class">.form-wrapper</span> <span class="selector-class">.row</span>&#123;</span></span><br><span class="line">			margin: 10px 0;</span><br><span class="line">		&#125;</span><br><span class="line"><span class="css">		<span class="selector-class">.form-wrapper</span> <span class="selector-class">.row</span>&gt;<span class="selector-tag">label</span>&#123;</span></span><br><span class="line">			display: inline-block;</span><br><span class="line">			min-width: 4em;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-wrapper"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">h1</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">"signUpForm"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">label</span>&gt;</span>邮箱<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"email"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"error"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">label</span>&gt;</span>密码<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"error"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">label</span>&gt;</span>确认密码<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password_confirmation"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"error"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"注册"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">		<span class="keyword">let</span> $form = $(<span class="string">'#signUpForm'</span>)</span></span><br><span class="line"><span class="javascript">		$form.on(<span class="string">'submit'</span>, (e) =&gt; &#123;</span></span><br><span class="line"><span class="javascript">			e.preventDefault() <span class="comment">//阻止自己提交</span></span></span><br><span class="line"><span class="javascript">			<span class="keyword">let</span> hash = &#123;&#125;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">let</span> need = [<span class="string">'email'</span>,<span class="string">'password'</span>,<span class="string">'password_confirmation'</span>]</span></span><br><span class="line"><span class="javascript">			need.forEach(<span class="function">(<span class="params">name</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">				<span class="keyword">let</span> value = $form.find(<span class="string">`[name=<span class="subst">$&#123;name&#125;</span>]`</span>).val() <span class="comment">// 分别获得，我们在邮箱，密码，确认密码中输入的值</span></span></span><br><span class="line">				hash[name] = value</span><br><span class="line">			&#125;)</span><br><span class="line"><span class="javascript">			$form.find(<span class="string">'.error'</span>).each(<span class="function">(<span class="params">index, span</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">				$(span).text(<span class="string">''</span>)</span></span><br><span class="line">			&#125;)</span><br><span class="line"><span class="javascript">			<span class="keyword">if</span>(hash[<span class="string">'email'</span>] === <span class="string">''</span>)&#123;</span></span><br><span class="line"><span class="javascript">				$form.find(<span class="string">'[name="email"]'</span>).siblings(<span class="string">'.error'</span>).text(<span class="string">'请输入邮箱'</span>).css(&#123;<span class="string">"color"</span>:<span class="string">"red"</span>&#125;)</span></span><br><span class="line"><span class="javascript">				<span class="keyword">return</span></span></span><br><span class="line">			&#125;</span><br><span class="line"><span class="javascript">			<span class="keyword">if</span>(hash[<span class="string">'password'</span>] === <span class="string">''</span>)&#123;</span></span><br><span class="line"><span class="javascript">				$form.find(<span class="string">'[name="password"]'</span>).siblings(<span class="string">'.error'</span>).text(<span class="string">'请输入密码'</span>)</span></span><br><span class="line"><span class="javascript">				<span class="keyword">return</span></span></span><br><span class="line">			&#125;</span><br><span class="line"><span class="javascript">			<span class="keyword">if</span>(hash[<span class="string">'password_confirmation'</span>] === <span class="string">''</span>)&#123;</span></span><br><span class="line"><span class="javascript">				$form.find(<span class="string">'[name="password_confirmation"]'</span>).siblings(<span class="string">'.error'</span>).text(<span class="string">'请确认密码'</span>)</span></span><br><span class="line"><span class="javascript">				<span class="keyword">return</span></span></span><br><span class="line">			&#125;</span><br><span class="line"><span class="javascript">			<span class="keyword">if</span>(hash[<span class="string">'password'</span>] !== hash[<span class="string">'password_confirmation'</span>])&#123;</span></span><br><span class="line"><span class="javascript">				$form.find(<span class="string">'[name="password_confirmation"]'</span>).siblings(<span class="string">'.error'</span>).text(<span class="string">'密码不一致'</span>).css(&#123;<span class="string">"color"</span>:<span class="string">"red"</span>&#125;)</span></span><br><span class="line"><span class="javascript">				<span class="keyword">return</span></span></span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">			$.post(<span class="string">'/sign_up'</span>, hash) <span class="comment">//发送注册请求之后</span></span></span><br><span class="line"><span class="javascript">				.then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">					<span class="built_in">console</span>.log(response)</span></span><br><span class="line">				&#125;, (request) =&gt; &#123;</span><br><span class="line"><span class="javascript">					<span class="comment">// console.log(request.statusText, request.status)</span></span></span><br><span class="line"><span class="javascript">					<span class="keyword">let</span> &#123;errors&#125; = request.responseJSON <span class="comment">//&#123;errors&#125; 邮箱有误的对象的信息</span></span></span><br><span class="line"><span class="javascript">					<span class="keyword">if</span>(errors.email &amp;&amp; errors.email === <span class="string">'invalid'</span>)&#123;</span></span><br><span class="line"><span class="javascript">						$form.find(<span class="string">'[name=email]'</span>).siblings(<span class="string">'.error'</span>).text(<span class="string">'邮箱格式有误'</span>).css(&#123;<span class="string">"color"</span>:<span class="string">"red"</span>&#125;)</span></span><br><span class="line">					&#125;</span><br><span class="line">				&#125;)</span><br><span class="line">		&#125;)</span><br><span class="line">	<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>将以下代码添加进 <code>server.js</code> 文件中</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(path === <span class="string">'/sign_up'</span> &amp;&amp; method === <span class="string">'GET'</span>)&#123; <span class="comment">//当打开 sign_up，并且 method === 'GET' 时</span></span><br><span class="line">  <span class="keyword">var</span> string = fs.readFileSync(<span class="string">'sign_up.html'</span>,<span class="string">'utf8'</span>)</span><br><span class="line">  response.statusCode = <span class="number">200</span></span><br><span class="line">  response.setHeader(<span class="string">'Content-Type'</span>,<span class="string">'text/html; charset=utf-8'</span>)</span><br><span class="line">  response.write(string)</span><br><span class="line">  response.end()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="现在我们可以通过-node-server-8080-启动"><a href="#现在我们可以通过-node-server-8080-启动" class="headerlink" title="现在我们可以通过 node server 8080 启动"></a>现在我们可以通过 <code>node server 8080</code> 启动</h4><p><img src="/img/%E6%B3%A8%E5%86%8C%E7%99%BB%E5%BD%95%E4%B8%8Ecookie/1.png" alt="node server 8080"></p>
<h4 id="然后在浏览器地址栏-打开-http-localhost-8080-sign-up"><a href="#然后在浏览器地址栏-打开-http-localhost-8080-sign-up" class="headerlink" title="然后在浏览器地址栏 打开 http://localhost:8080/sign_up"></a>然后在浏览器地址栏 打开 <a href="http://localhost:8080/sign_up" target="_blank" rel="noopener">http://localhost:8080/sign_up</a></h4><p><img src="/img/%E6%B3%A8%E5%86%8C%E7%99%BB%E5%BD%95%E4%B8%8Ecookie/2.png" alt="http://localhost:8080/sign_up"></p>
<p>将以下代码添加进 server.js 文件中（封装一个函数，用来读取第四部分 <code>Form Data</code> 里面的内容）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//node http get post data</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">readBody</span>(<span class="params">request</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> body = [] <span class="comment">//</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    request.on(<span class="string">'data'</span>, (chunk) =&gt; &#123;</span><br><span class="line">      body.push(chunk);</span><br><span class="line">    &#125;).on(<span class="string">'end'</span>, () =&gt; &#123;</span><br><span class="line">      body = Buffer.concat(body).toString();</span><br><span class="line">      resolve(body)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>将以下代码添加进 <code>server.js</code> 文件中</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(path === <span class="string">'/sign_up'</span> &amp;&amp; method === <span class="string">'POST'</span>)&#123;<span class="comment">//当打开 sign_up，并且 method === '' 时</span></span><br><span class="line">  readBody(request).then(<span class="function">(<span class="params">body</span>) =&gt;</span> &#123; <span class="comment">//读取输入的数据（email=1%40&amp;password=1&amp;password_confirmation=1）</span></span><br><span class="line">    <span class="keyword">let</span> strings = body.split(<span class="string">'&amp;'</span>) <span class="comment">//用 split 分离（分别输入1@，1，1 得到[ 'email=1%40', 'password=1', 'password_confirmation=1' ]）</span></span><br><span class="line">    <span class="keyword">let</span> hash = &#123;&#125;</span><br><span class="line">    strings.forEach(<span class="function">(<span class="params">string</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> parts = string.split(<span class="string">'='</span>) <span class="comment">//[ 'email', '1%40' ][ 'password', '1' ][ 'password_confirmation', '1' ]</span></span><br><span class="line">      <span class="keyword">let</span> key = parts[<span class="number">0</span>] <span class="comment">//email password password_confirmation</span></span><br><span class="line">      <span class="keyword">let</span> value = parts[<span class="number">1</span>] <span class="comment">//1%40 1 1</span></span><br><span class="line">      hash[key] = <span class="built_in">decodeURIComponent</span>(value) <span class="comment">//decodeURIComponent 用于将@ 转换(hash['email']='1@')</span></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> &#123;email, password, password_confirmation&#125; = hash</span><br><span class="line">    <span class="keyword">if</span>(email.indexOf(<span class="string">'@'</span>) === <span class="number">-1</span>)&#123; <span class="comment">//如果 email 里面没有@</span></span><br><span class="line">      response.statusCode = <span class="number">400</span> <span class="comment">//那么就 400</span></span><br><span class="line">      response.setHeader(<span class="string">'Content-Type'</span>,<span class="string">'application/json; charset=utf-8'</span>) <span class="comment">//此处标明为 JSON语法</span></span><br><span class="line">      <span class="comment">// 以下代码是后端的</span></span><br><span class="line">      response.write(<span class="string">`&#123;</span></span><br><span class="line"><span class="string">        "errors":&#123;</span></span><br><span class="line"><span class="string">          "email": "invalid"</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;`</span>)</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(password !== password_confirmation)&#123; <span class="comment">//如果 密码 与 确认密码不一样</span></span><br><span class="line">      response.statusCode = <span class="number">400</span></span><br><span class="line">      response.write(<span class="string">'password is not same'</span>)</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="keyword">var</span> users = fs.readFileSync(<span class="string">'./db/users'</span>, <span class="string">'utf8'</span>) <span class="comment">//users</span></span><br><span class="line">      <span class="comment">// 如果 有问题 就 清空</span></span><br><span class="line">      <span class="keyword">try</span>&#123;</span><br><span class="line">        users = <span class="built_in">JSON</span>.parse(users) <span class="comment">//[]</span></span><br><span class="line">      &#125;<span class="keyword">catch</span>(exception)&#123;</span><br><span class="line">        users = []</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 用户是否已存在</span></span><br><span class="line">      <span class="keyword">let</span> inUse = <span class="literal">false</span> <span class="comment">//先默认没有注册</span></span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;users.length;i++)&#123;</span><br><span class="line">        <span class="keyword">let</span> user = users[i]</span><br><span class="line">        <span class="keyword">if</span>(user.email === email)&#123;</span><br><span class="line">          inUse = <span class="literal">true</span> <span class="comment">//如果被占用</span></span><br><span class="line">          <span class="keyword">break</span>; <span class="comment">//阻止注册</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span>(inUse)&#123; <span class="comment">//如果用户被占用</span></span><br><span class="line">        response.statusCode = <span class="number">400</span> <span class="comment">//提示错误400</span></span><br><span class="line">        response.write(<span class="string">'email in use'</span>) <span class="comment">//并提示 'email in use'</span></span><br><span class="line">      &#125;<span class="keyword">else</span>&#123; <span class="comment">//如果没有被占用</span></span><br><span class="line">        users.push(&#123;<span class="attr">email</span>: email, <span class="attr">password</span>: password&#125;)</span><br><span class="line">        <span class="keyword">var</span> usersString = <span class="built_in">JSON</span>.stringify(users)</span><br><span class="line">        fs.writeFileSync(<span class="string">'./db/users'</span>, usersString)</span><br><span class="line">        response.statusCode = <span class="number">200</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    response.end()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><font color="#0099ff" face="黑体">注：前后端的代码都应该验证，后端一定要验，前端不一定。黑客可以跨过前端JS通过 curl 发请求，所以一定要确保后端代码。</font><br><img src="/img/%E6%B3%A8%E5%86%8C%E7%99%BB%E5%BD%95%E4%B8%8Ecookie/4.jpg" alt="curl"><br><img src="/img/%E6%B3%A8%E5%86%8C%E7%99%BB%E5%BD%95%E4%B8%8Ecookie/5.jpg" alt="粘贴"></p>
<h4 id="再新建一个-db-文件夹，加入-users-文件，将-users-作为我们的数据库"><a href="#再新建一个-db-文件夹，加入-users-文件，将-users-作为我们的数据库" class="headerlink" title="再新建一个 db 文件夹，加入 users 文件，将 users 作为我们的数据库"></a>再新建一个 <code>db</code> 文件夹，加入 <code>users</code> 文件，将 <code>users</code> 作为我们的数据库</h4><p><img src="/img/%E6%B3%A8%E5%86%8C%E7%99%BB%E5%BD%95%E4%B8%8Ecookie/6.png" alt="users"></p>
<p>等以上设置好了，注册用户，回到 user 文件，则可以看到 注册的用户信息。</p>
<h4 id="现在我们要做一个-登录-页面，创建-sign-in-html-文件"><a href="#现在我们要做一个-登录-页面，创建-sign-in-html-文件" class="headerlink" title="现在我们要做一个 登录 页面，创建 sign_in.html 文件"></a>现在我们要做一个 登录 页面，创建 <code>sign_in.html</code> 文件</h4><h5 id="sign-in-html"><a href="#sign-in-html" class="headerlink" title="sign_in.html"></a>sign_in.html</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line">		*&#123;</span><br><span class="line">			margin: 0;</span><br><span class="line">			padding: 0;</span><br><span class="line">			box-sizing: border-box;</span><br><span class="line">		&#125;</span><br><span class="line">		body&#123;</span><br><span class="line">			border: 1px solid red;</span><br><span class="line">			height: 100vh;</span><br><span class="line">			display: flex;</span><br><span class="line">			justify-content: center;</span><br><span class="line">			align-items: center;</span><br><span class="line">		&#125;</span><br><span class="line"><span class="css">		<span class="selector-class">.form-wrapper</span>&#123;</span></span><br><span class="line">			min-width: 350px;</span><br><span class="line">			padding: 20px;</span><br><span class="line"><span class="css">			<span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#ddd</span>;</span></span><br><span class="line">		&#125;</span><br><span class="line"><span class="css">		<span class="selector-class">.form-wrapper</span> <span class="selector-class">.row</span>&#123;</span></span><br><span class="line">			margin: 10px 0;</span><br><span class="line">		&#125;</span><br><span class="line"><span class="css">		<span class="selector-class">.form-wrapper</span> <span class="selector-class">.row</span>&gt;<span class="selector-tag">label</span>&#123;</span></span><br><span class="line">			display: inline-block;</span><br><span class="line">			min-width: 4em;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-wrapper"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">h1</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">"signInForm"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">label</span>&gt;</span>邮箱<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"email"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"error"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">label</span>&gt;</span>密码<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"error"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"登录"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">		<span class="keyword">let</span> $form = $(<span class="string">'#signInForm'</span>)</span></span><br><span class="line"><span class="javascript">		$form.on(<span class="string">'submit'</span>, (e) =&gt; &#123;</span></span><br><span class="line">			e.preventDefault()</span><br><span class="line"><span class="javascript">			<span class="keyword">let</span> hash = &#123;&#125;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">let</span> need = [<span class="string">'email'</span>,<span class="string">'password'</span>,<span class="string">'password_confirmation'</span>]</span></span><br><span class="line"><span class="javascript">			need.forEach(<span class="function">(<span class="params">name</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">				<span class="keyword">let</span> value = $form.find(<span class="string">`[name=<span class="subst">$&#123;name&#125;</span>]`</span>).val()</span></span><br><span class="line">				hash[name] = value</span><br><span class="line">			&#125;)</span><br><span class="line"><span class="javascript">			$form.find(<span class="string">'.error'</span>).each(<span class="function">(<span class="params">index, span</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">				$(span).text(<span class="string">''</span>)</span></span><br><span class="line">			&#125;)</span><br><span class="line"><span class="javascript">			<span class="keyword">if</span>(hash[<span class="string">'email'</span>] === <span class="string">''</span>)&#123;</span></span><br><span class="line"><span class="javascript">				$form.find(<span class="string">'[name="email"]'</span>).siblings(<span class="string">'.error'</span>).text(<span class="string">'请输入邮箱'</span>).css(&#123;<span class="string">"color"</span>:<span class="string">"red"</span>&#125;)</span></span><br><span class="line"><span class="javascript">				<span class="keyword">return</span></span></span><br><span class="line">			&#125;</span><br><span class="line"><span class="javascript">			<span class="keyword">if</span>(hash[<span class="string">'password'</span>] === <span class="string">''</span>)&#123;</span></span><br><span class="line"><span class="javascript">				$form.find(<span class="string">'[name="password"]'</span>).siblings(<span class="string">'.error'</span>).text(<span class="string">'请输入密码'</span>)</span></span><br><span class="line"><span class="javascript">				<span class="keyword">return</span></span></span><br><span class="line">			&#125;</span><br><span class="line"><span class="javascript">			$.post(<span class="string">'/sign_in'</span>, hash)</span></span><br><span class="line"><span class="javascript">				.then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">					<span class="built_in">window</span>.location.href = <span class="string">'/'</span></span></span><br><span class="line">				&#125;, (request) =&gt; &#123;</span><br><span class="line"><span class="javascript">					alert(<span class="string">'失败'</span>)</span></span><br><span class="line">				&#125;)</span><br><span class="line">		&#125;)</span><br><span class="line">	<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>将以下代码添加进 <code>server.js</code> 文件中</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(path === <span class="string">'/sign_in'</span> &amp;&amp; method === <span class="string">'GET'</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> string = fs.readFileSync(<span class="string">'sign_in.html'</span>,<span class="string">'utf8'</span>)</span><br><span class="line">    response.statusCode = <span class="number">200</span></span><br><span class="line">    response.setHeader(<span class="string">'Content-Type'</span>,<span class="string">'text/html; charset=utf-8'</span>)</span><br><span class="line">    response.write(string)</span><br><span class="line">    response.end()</span><br><span class="line">  &#125;<span class="keyword">else</span> <span class="keyword">if</span>(path === <span class="string">'/sign_in'</span> &amp;&amp; method === <span class="string">'POST'</span>)&#123;</span><br><span class="line">    readBody(request).then(<span class="function">(<span class="params">body</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> strings = body.split(<span class="string">'&amp;'</span>)</span><br><span class="line">      <span class="keyword">let</span> hash = &#123;&#125;</span><br><span class="line">      strings.forEach(<span class="function">(<span class="params">string</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> parts = string.split(<span class="string">'='</span>)</span><br><span class="line">        <span class="keyword">let</span> key = parts[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">let</span> value = parts[<span class="number">1</span>]</span><br><span class="line">        hash[key] = <span class="built_in">decodeURIComponent</span>(value) <span class="comment">//decodeURIComponent 用于将@ 转换</span></span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="keyword">let</span> &#123;email, password&#125; = hash</span><br><span class="line">      <span class="keyword">var</span> users = fs.readFileSync(<span class="string">'./db/users'</span>, <span class="string">'utf8'</span>)</span><br><span class="line">      <span class="keyword">try</span>&#123;</span><br><span class="line">        users = <span class="built_in">JSON</span>.parse(users) <span class="comment">//[]</span></span><br><span class="line">      &#125;<span class="keyword">catch</span>(exception)&#123;</span><br><span class="line">        users = []</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">let</span> found</span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;users.length;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(users[i].email === email &amp;&amp; users[i].password === password)&#123;</span><br><span class="line">          found = <span class="literal">true</span></span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span>(found)&#123;</span><br><span class="line">        response.setHeader(<span class="string">'Set-Cookie'</span>, <span class="string">`sign_in_email=<span class="subst">$&#123;email&#125;</span>; HttpOnly`</span>) <span class="comment">// HttpOnly,禁止用户擅自修改cookie</span></span><br><span class="line">        response.statusCode = <span class="number">200</span></span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        response.statusCode = <span class="number">401</span></span><br><span class="line">      &#125;</span><br><span class="line">      response.end()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Set-Cookie" target="_blank" rel="noopener"><code>Set-Cookie</code> 的用法</a><br><img src="./img/%E6%B3%A8%E5%86%8C%E7%99%BB%E5%BD%95%E4%B8%8Ecookie/7.png" alt="Set-Cookie"></p>
<p>现在登录一个已经注册过的用户，在点击 登录 之前，钩上 <code>Preserve log</code><br><img src="./img/%E6%B3%A8%E5%86%8C%E7%99%BB%E5%BD%95%E4%B8%8Ecookie/8.png" alt="Preserve log"><br>可以看到<code>sign_in</code>, <code>Response Headers</code> 里面的 <code>Set-Cookie</code> 和 <code>localhost</code>, <code>Request Headers</code> 里面的 <code>Cookie</code> 内容一致。</p>
<p><img src="./img/%E6%B3%A8%E5%86%8C%E7%99%BB%E5%BD%95%E4%B8%8Ecookie/9.png" alt="sign_in"><br><img src="./img/%E6%B3%A8%E5%86%8C%E7%99%BB%E5%BD%95%E4%B8%8Ecookie/10.png" alt="localhost"></p>
<h4 id="只要set-cookie-以后给的请求，里面都会带上这个-cookie。"><a href="#只要set-cookie-以后给的请求，里面都会带上这个-cookie。" class="headerlink" title="只要set-cookie, 以后给的请求，里面都会带上这个 cookie。"></a>只要<code>set-cookie</code>, 以后给的请求，里面都会带上这个 <code>cookie</code>。</h4><h2 id="Cookie-特点"><a href="#Cookie-特点" class="headerlink" title="Cookie 特点"></a>Cookie 特点</h2><ol>
<li>服务器通过 Set-Cookie 响应头设置Cookie</li>
<li>浏览器得到 Cookie 之后，每次请求都要带上 Cookie</li>
<li>服务器读取 Cookie 就知道登录用户的信息（email）</li>
</ol>
<h3 id="完整代码-https-github-com-ryyoyo-cookie"><a href="#完整代码-https-github-com-ryyoyo-cookie" class="headerlink" title="完整代码(https://github.com/ryyoyo/cookie)"></a>完整代码(<a href="https://github.com/ryyoyo/cookie" target="_blank" rel="noopener">https://github.com/ryyoyo/cookie</a>)</h3>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/09/25/原生js发AJAX请求/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="R.Y">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/dog.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="R.Y">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/09/25/原生js发AJAX请求/" itemprop="url">原生js发AJAX请求</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-09-25T15:27:15+08:00">
                2018-09-25
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="XMLHttpRequest是Ajax的核心，通过调用XMLHttpRequest对象的属性和方法可以实现在客户端和浏览器之间进行数据的异步传输，从而实现页面的无刷新效果。"><a href="#XMLHttpRequest是Ajax的核心，通过调用XMLHttpRequest对象的属性和方法可以实现在客户端和浏览器之间进行数据的异步传输，从而实现页面的无刷新效果。" class="headerlink" title="XMLHttpRequest是Ajax的核心，通过调用XMLHttpRequest对象的属性和方法可以实现在客户端和浏览器之间进行数据的异步传输，从而实现页面的无刷新效果。"></a>XMLHttpRequest是Ajax的核心，通过调用XMLHttpRequest对象的属性和方法可以实现在客户端和浏览器之间进行数据的异步传输，从而实现页面的无刷新效果。</h3><h3 id="XMLHttpRequest对象的使用需要四个步骤："><a href="#XMLHttpRequest对象的使用需要四个步骤：" class="headerlink" title="XMLHttpRequest对象的使用需要四个步骤："></a>XMLHttpRequest对象的使用需要四个步骤：</h3><p>(1) 初始化XMLHttpRequest对象</p>
<p>(2) 指定响应处理函数</p>
<p>(3) 发送HTTP请求</p>
<p>(4) 处理服务器返回的信息</p>
<h3 id="XMLHttpRequest对象的常用属性："><a href="#XMLHttpRequest对象的常用属性：" class="headerlink" title="XMLHttpRequest对象的常用属性："></a>XMLHttpRequest对象的常用属性：</h3><p>onreadystatechange：指定当readyState属性值改变时的事件处理句柄(只写)；</p>
<p>readyState：返回当前请求的状态(只读)；</p>
<p>responseText：将相应信息作为字符串返回(只读)；</p>
<h3 id="XMLHttpRequest对象的常用方法："><a href="#XMLHttpRequest对象的常用方法：" class="headerlink" title="XMLHttpRequest对象的常用方法："></a>XMLHttpRequest对象的常用方法：</h3><p>open()：创建一个新的HTTP请求，并制定此请求的方法，URL以及验证信息(用户名/密码)；</p>
<p>send()：发送请求到HTTP服务器并接受回应。</p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">myBtn.addEventListener(<span class="string">'click'</span>,(e)=&gt;&#123;</span><br><span class="line">	<span class="comment">//(1) 初始化XMLHttpRequest对象（产生对象）</span></span><br><span class="line">	<span class="keyword">let</span> request = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line">	<span class="comment">//(2) 指定响应处理函数（配置对象）</span></span><br><span class="line">	request.open(<span class="string">'GET'</span>,<span class="string">'http://king.com:8002/xxx'</span>)</span><br><span class="line">	<span class="comment">//(3) 发送HTTP请求（发送对象）</span></span><br><span class="line">	request.send()</span><br><span class="line">	<span class="comment">//(4) 处理服务器返回的信息（监听对象，readyState 的变化）</span></span><br><span class="line">	request.onreadystatechange = <span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(request.readyState === <span class="number">4</span>)&#123;</span><br><span class="line">			<span class="keyword">if</span>(request.status &gt;= <span class="number">200</span> &amp;&amp; request.status &lt; <span class="number">300</span>)&#123;</span><br><span class="line">				<span class="comment">//把符合 JSON 语法的字符串</span></span><br><span class="line">				<span class="keyword">let</span> string = request.responseText</span><br><span class="line">				<span class="comment">//转换成 JS 对应的值</span></span><br><span class="line">				<span class="keyword">let</span> object = <span class="built_in">window</span>.JSON.parse(string)</span><br><span class="line">			&#125;<span class="keyword">else</span> <span class="keyword">if</span>(request.status &gt;= <span class="number">400</span>)&#123;</span><br><span class="line">				<span class="built_in">console</span>.log(<span class="string">'请求失败'</span>)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="readyState属性用来表示请求的状态，有5个可取值，分别是："><a href="#readyState属性用来表示请求的状态，有5个可取值，分别是：" class="headerlink" title="readyState属性用来表示请求的状态，有5个可取值，分别是："></a>readyState属性用来表示请求的状态，有5个可取值，分别是：</h3><p>“0”：表示未初始化，即对象已经建立，但是尚未初始化(尚未调用open()方法)；</p>
<p>“1”：表示正在加载，此时对象已建立，尚未调用send()方法；</p>
<p>“2”：表示请求已发送，即send()方法已调用；</p>
<p>“3”：表示请求处理中；</p>
<p>“4”：表示请求已完成，即数据接收完毕。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/09/19/JSONP请求/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="R.Y">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/dog.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="R.Y">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/09/19/JSONP请求/" itemprop="url">JSONP请求</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-09-19T22:31:24+08:00">
                2018-09-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>form img(只能发get请求) 都可以发请求</p>
<h2 id="什么是JSONP"><a href="#什么是JSONP" class="headerlink" title="什么是JSONP"></a>什么是JSONP</h2><h5 id="JSONP-JSON-with-Padding-是-json-的一种使用模式，可以让网页从别的域名（网站）那获取资料，即跨域读取数据。"><a href="#JSONP-JSON-with-Padding-是-json-的一种使用模式，可以让网页从别的域名（网站）那获取资料，即跨域读取数据。" class="headerlink" title="JSONP(JSON with Padding) 是 json 的一种使用模式，可以让网页从别的域名（网站）那获取资料，即跨域读取数据。"></a>JSONP(JSON with Padding) 是 json 的一种<code>使用模式</code>，可以让网页从别的域名（网站）那获取资料，即<code>跨域</code>读取数据。</h5><p>  请求方：ry.com 这个网站的前端程序员（浏览器）<br>  响应方：king.com 这个网站的后端程序员（服务器）</p>
<ol>
<li>请求方 创建 script，src 指向 响应方，同时传一个查询参数 ?callbackName=xxx</li>
<li>响应方 根据 查询参数 callbackName，构造形如<ol>
<li>xxx.call(undefined,’你要的数据’)</li>
<li>xxx(‘你要的数据’)<br>这样的响应</li>
</ol>
</li>
<li>浏览器接收到响应，就会执行 xxx.call(undefined,’你要的数据’)</li>
<li>那么 请求方就知道了他要的数据</li>
</ol>
<h4 id="这就是-JSONP"><a href="#这就是-JSONP" class="headerlink" title="这就是 JSONP"></a>这就是 JSONP</h4><h2 id="行业约定"><a href="#行业约定" class="headerlink" title="行业约定"></a>行业约定</h2><ol>
<li>callbackName -&gt; callback</li>
<li>xxx -&gt; 随机数 ry13242345325325</li>
</ol>
<p>引用代码如下</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">    url: <span class="string">'http://king.com:8002/pay'</span>,</span><br><span class="line">    dataType: <span class="string">'jsonp'</span>,</span><br><span class="line">    success: <span class="function"><span class="keyword">function</span> (<span class="params">response</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(response === <span class="string">'heihei'</span>)&#123;</span><br><span class="line">            amount.innerText = amount.innerText - <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="以下是一个-【付款】-网站"><a href="#以下是一个-【付款】-网站" class="headerlink" title="以下是一个 【付款】 网站"></a>以下是一个 【付款】 网站</h2><h3 id="首先，将-index-js-index-html，db-文件里面的内容复制"><a href="#首先，将-index-js-index-html，db-文件里面的内容复制" class="headerlink" title="首先，将 index.js,index.html，db 文件里面的内容复制"></a>首先，将 index.js,index.html，db 文件里面的内容复制</h3><h2 id="index-js"><a href="#index-js" class="headerlink" title="index.js"></a>index.js</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>)</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"><span class="keyword">var</span> url = <span class="built_in">require</span>(<span class="string">'url'</span>)</span><br><span class="line"><span class="keyword">var</span> port = process.argv[<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(!port)&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'请指定端口号好不啦？\nnode server.js 8888 这样不会吗？'</span>)</span><br><span class="line">  process.exit(<span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> server = http.createServer(<span class="function"><span class="keyword">function</span>(<span class="params">request, response</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> parsedUrl = url.parse(request.url, <span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">var</span> pathWithQuery = request.url</span><br><span class="line">  <span class="keyword">var</span> queryString = <span class="string">''</span></span><br><span class="line">  <span class="keyword">if</span>(pathWithQuery.indexOf(<span class="string">'?'</span>) &gt;= <span class="number">0</span>)&#123; queryString = pathWithQuery.substring(pathWithQuery.indexOf(<span class="string">'?'</span>)) &#125;</span><br><span class="line">  <span class="keyword">var</span> path = parsedUrl.pathname</span><br><span class="line">  <span class="keyword">var</span> query = parsedUrl.query</span><br><span class="line">  <span class="keyword">var</span> method = request.method</span><br><span class="line"></span><br><span class="line">  <span class="comment">/******** 从这里开始看，上面不要看 ************/</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'含查询字符串的路径\n'</span> + pathWithQuery)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>(path === <span class="string">'/'</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> string = fs.readFileSync(<span class="string">'./index.html'</span>,<span class="string">'utf8'</span>)</span><br><span class="line">    <span class="keyword">var</span> amount = fs.readFileSync(<span class="string">'./db'</span>,<span class="string">'utf8'</span>)</span><br><span class="line">    string = string.replace(<span class="string">'&amp;&amp;&amp;amount&amp;&amp;&amp;'</span>,amount)</span><br><span class="line">    response.setHeader(<span class="string">'Content-Type'</span>,<span class="string">'text/html; charset=utf-8'</span>)</span><br><span class="line">    response.write(string)</span><br><span class="line">    response.end()</span><br><span class="line">  &#125;<span class="keyword">else</span> <span class="keyword">if</span>(path === <span class="string">'/style.css'</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> string = fs.readFileSync(<span class="string">'./style.css'</span>,<span class="string">'utf8'</span>)</span><br><span class="line">    response.setHeader(<span class="string">'Content-Type'</span>,<span class="string">'text/css; charset=utf-8'</span>)</span><br><span class="line">    response.write(string)</span><br><span class="line">    response.end()</span><br><span class="line">  &#125;<span class="keyword">else</span> <span class="keyword">if</span>(path === <span class="string">'/main.js'</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> string = fs.readFileSync(<span class="string">'./main.js'</span>,<span class="string">'utf8'</span>)</span><br><span class="line">    response.setHeader(<span class="string">'Content-Type'</span>,<span class="string">'application/javascript;'</span>)</span><br><span class="line">    response.write(string)</span><br><span class="line">    response.end()</span><br><span class="line">  &#125;<span class="keyword">else</span> <span class="keyword">if</span>(path === <span class="string">'/pay'</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> amount = fs.readFileSync(<span class="string">'./db'</span>,<span class="string">'utf8'</span>)</span><br><span class="line">    <span class="keyword">var</span> newAmount = amount - <span class="number">1</span></span><br><span class="line">    fs.writeFileSync(<span class="string">'./db'</span>,newAmount)</span><br><span class="line">    response.setHeader(<span class="string">'Content-Type'</span>,<span class="string">'application/javascript;'</span>)</span><br><span class="line">    response.statusCode = <span class="number">200</span></span><br><span class="line">    response.write(<span class="string">`</span></span><br><span class="line"><span class="string">      <span class="subst">$&#123;query.callback&#125;</span>.call(undefined,'heihei')</span></span><br><span class="line"><span class="string">    `</span>)</span><br><span class="line">    response.end()</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    response.statusCode = <span class="number">404</span></span><br><span class="line">    response.setHeader(<span class="string">'Content-Type'</span>, <span class="string">'text/html;charset=utf-8'</span>)</span><br><span class="line">    response.write(<span class="string">'找不到对应的路径，你需要自行修改 index.js'</span>)</span><br><span class="line">    response.end()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/******** 代码结束，下面不要看 ************/</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">server.listen(port)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'监听 '</span> + port + <span class="string">' 成功\n请用在空中转体720度然后用电饭煲打开 http://localhost:'</span> + port)</span><br></pre></td></tr></table></figure>

<h3 id="JSONP-精髓"><a href="#JSONP-精髓" class="headerlink" title="JSONP 精髓"></a>JSONP 精髓</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;query.callback&#125;.call(<span class="literal">undefined</span>,<span class="string">'heihei'</span>)</span><br></pre></td></tr></table></figure>

<h2 id="index-html"><a href="#index-html" class="headerlink" title="index.html"></a>index.html</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>付款<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"style.css"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js</span></span></span><br><span class="line"><span class="tag"><span class="string">"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h5</span>&gt;</span>余额<span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"amount"</span>&gt;</span>&amp;&amp;&amp;amount&amp;&amp;&amp;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"button"</span>&gt;</span>付款<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">$(button).on(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">	$.ajax(&#123;</span></span><br><span class="line"><span class="javascript">        url : <span class="string">"http://king.com:8002/pay"</span>,</span></span><br><span class="line"><span class="javascript">        dataType : <span class="string">"jsonp"</span>,<span class="comment">//数据类型为jsonp</span></span></span><br><span class="line"><span class="javascript">        success : <span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">        	<span class="keyword">if</span>(response === <span class="string">'heihei'</span>)&#123;</span></span><br><span class="line">				amount.innerText = amount.innerText - 1</span><br><span class="line">			&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="db-此表示代码中的金额"><a href="#db-此表示代码中的金额" class="headerlink" title="db (此表示代码中的金额)"></a>db (此表示代码中的金额)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1000</span><br></pre></td></tr></table></figure>

<h3 id="接着，找到电脑中的-hosts-文件-（shift-command-G），输入-etc-hosts-前往"><a href="#接着，找到电脑中的-hosts-文件-（shift-command-G），输入-etc-hosts-前往" class="headerlink" title="接着，找到电脑中的 hosts 文件 （shift+command+G），输入 /etc/hosts 前往"></a>接着，找到电脑中的 hosts 文件 （shift+command+G），输入 /etc/hosts 前往</h3><p><img src="/img/jsonp/1.png" alt="shift+command+G"><br>将 hosts 文件复制出来<br><img src="/img/jsonp/2.png" alt="找到hosts文件，复制出来"><br>在 副本 hosts 文件，添加这两行。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1 ry.com</span><br><span class="line">127.0.0.1 king.com</span><br></pre></td></tr></table></figure>

<p><img src="/img/jsonp/3.png" alt="在副本最后添加"><br>保存并替换以前 hosts 文件（放到以前 hosts 文件的位置）</p>
<h3 id="我们在后台，分别运行以下代码-打开两个"><a href="#我们在后台，分别运行以下代码-打开两个" class="headerlink" title="我们在后台，分别运行以下代码(打开两个)"></a>我们在后台，分别运行以下代码(打开两个)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node index.js 8001 //程序参数</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PORT=8001 node index.js //环境变量</span><br></pre></td></tr></table></figure>

<p><img src="/img/jsonp/4.png" alt="node index.js 8001"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node index.js 8002</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PORT=8002 node index.js</span><br></pre></td></tr></table></figure>

<p><img src="/img/jsonp/5.png" alt="node index.js 8002"></p>
<h3 id="在浏览器地址栏，输入-king-com-8002-即可"><a href="#在浏览器地址栏，输入-king-com-8002-即可" class="headerlink" title="在浏览器地址栏，输入 king.com:8002 即可"></a>在浏览器地址栏，输入 king.com:8002 即可</h3><p><img src="/img/jsonp/6.png" alt="king.com:8002"></p>
<h2 id="为什么-JSONP-不支持-POST-请求？"><a href="#为什么-JSONP-不支持-POST-请求？" class="headerlink" title="为什么 JSONP 不支持 POST 请求？"></a><font color="red">为什么 JSONP 不支持 POST 请求？</font></h2><blockquote>
<ol>
<li>因为 JSONP 是通过动态创建 script 实现的。</li>
<li>但是，动态创建 script 只能用 GET，不能用 POST 。</li>
</ol>
</blockquote>
<h4 id="小总结："><a href="#小总结：" class="headerlink" title="小总结："></a>小总结：</h4><pre><code>1.form 表单提交会刷新页面。  
2.那我们就用 img ，但是 img 只能知道成功和失败，不能知道更多的数据。  
3.那我们就用 script ，script 要让后端知道我们要执行的代码，那我们就要加 callback 参数，
后台就根据 callback 参数，构造出一个函数调用，然后把数据放到 第一个参数 里面，call 一下就好了。</code></pre><p>script + callback参数 = JSONP</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/20/DOM/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="R.Y">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/dog.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="R.Y">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/20/DOM/" itemprop="url">DOM （冒泡、捕获、点击隐藏浮层）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-20T00:00:00+08:00">
                2018-08-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Document-Object-Model-文档对象模型"><a href="#Document-Object-Model-文档对象模型" class="headerlink" title="Document Object Model(文档对象模型)"></a>Document Object Model(文档对象模型)</h1><h2 id="DOM的主要功能："><a href="#DOM的主要功能：" class="headerlink" title="DOM的主要功能："></a>DOM的主要功能：</h2><p>页面中的节点（Node），通过<code>构造函数</code>（Document，Element，Text，Comment…等构造函数），构造出对应的对象。<br>Node也是一个构造函数， 派生于 Object，所以 Node 构造出来的函数，也有 Object 的公有属性。</p>
<h4 id="Node-构造了-Document-DocumentType-Elment-Text-Comment-DocumentFragment…-等类型。"><a href="#Node-构造了-Document-DocumentType-Elment-Text-Comment-DocumentFragment…-等类型。" class="headerlink" title="Node 构造了 Document DocumentType Elment Text Comment DocumentFragment… 等类型。"></a>Node 构造了 <b><code>Document</code> <code>DocumentType</code> <code>Elment</code> <code>Text</code> <code>Comment</code> <code>DocumentFragment</code>…</b> 等类型。</h4><blockquote>
<p><b><code>Document</code></b> 构造了<code>&lt;html&gt;</code>标签。<br><b><code>Element</code></b> 构造了<code>&lt;head&gt;</code> <code>&lt;body&gt;</code> <code>&lt;meta&gt;</code> <code>&lt;title&gt;</code> <code>&lt;script&gt;</code> <code>&lt;h1&gt;</code>…标签。<br><b><code>Text</code></b>构造了页面中 <code>文本</code>。<br><b><code>Comment</code></b>构造了页面中 <code>注释</code>。</p>
</blockquote>
<hr>


<h2 id="Node-接口"><a href="#Node-接口" class="headerlink" title="Node 接口"></a>Node 接口</h2><h4 id="Node-属性：查阅MDN"><a href="#Node-属性：查阅MDN" class="headerlink" title="Node 属性：查阅MDN"></a>Node 属性：<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Node" target="_blank" rel="noopener">查阅MDN</a></h4><blockquote>
<p>childNode,fristChild,<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Node/innerText" target="_blank" rel="noopener">innerText</a>,lastChild,<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Node/nextSibling" target="_blank" rel="noopener">nextSibling</a>,nodeName,<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Node/nodeType" target="_blank" rel="noopener">nodeType</a>,nodeValue,outerValue,ownDocument,parentElement,parentNode,previousSibling,<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Node/textContent" target="_blank" rel="noopener">textContent</a></p>
</blockquote>
<ul>
<li>1.<a href="https://www.cnblogs.com/wangwg1994/p/8412866.html" target="_blank" rel="noopener">innerText 和 textContent 区别</a></li>
<li>2.nodeType 1 和 3 分别代表什么</li>
</ul>
<h4 id="Node-方法：查阅MDN"><a href="#Node-方法：查阅MDN" class="headerlink" title="Node 方法：查阅MDN"></a>Node 方法：<a href="https://developer.mozilla.org/en-US/docs/Web/API/Node/appendChild" target="_blank" rel="noopener">查阅MDN</a></h4><ul>
<li><code>appendChild()</code>添加子元素</li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Node/cloneNode" target="_blank" rel="noopener"><code>cloneNode()</code></a>克隆节点（分<code>true深拷贝</code>、<code>false浅拷贝</code>）</li>
<li><code>contains()</code>是否包含另一个元素</li>
<li><code>hasChildNodes()</code>是否有子元素，返回一个布尔值</li>
<li><code>insertBefore()</code>把…插到…前面</li>
<li><code>isEqualNode()</code>是否是相等的节点</li>
<li><code>isSameNode()</code>是否是相同的节点（同一个 ‘===’）</li>
<li><code>removeChild()</code>移除子元素（还是存在于内存中）</li>
<li><code>replaceChild()</code>替换子元素（）</li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Node/normalize" target="_blank" rel="noopener"><code>normalize()</code></a>使…正常</li>
</ul>
<h2 id="Document-接口"><a href="#Document-接口" class="headerlink" title="Document 接口"></a>Document 接口</h2><p>查看document属性 <code>console.dir(document)</code><br><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document" target="_blank" rel="noopener">Document MDN</a></p>
<h4 id="Document-属性-查询MDN"><a href="#Document-属性-查询MDN" class="headerlink" title="Document 属性 查询MDN"></a>Document 属性 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/body" target="_blank" rel="noopener">查询MDN</a></h4><blockquote>
<p>body,characterSet,childElementCount,children,doctype,documentElement,domain,fullscreen,head,hidden,images,<br>links,location,onxxxxxx,origin,plugins,readState,referrer,scripts,scrollingElement,styleSheets,title,visibilityState</p>
</blockquote>
<h4 id="Document-方法-查询MDN"><a href="#Document-方法-查询MDN" class="headerlink" title="Document 方法 查询MDN"></a>Document 方法 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/close" target="_blank" rel="noopener">查询MDN</a></h4><ul>
<li><code>close()</code></li>
<li><code>createAttribute</code></li>
<li><code>createElement</code></li>
</ul>
<h1 id="DOM事件-看一下"><a href="#DOM事件-看一下" class="headerlink" title=" DOM事件 看一下"></a><font color="red"> DOM事件</font> 看一下</h1><pre><code>事件监听
btn.onclick.call(this,arguments)  //this = btn,arguments = 参数</code></pre><h2 id="DOM-Level-0"><a href="#DOM-Level-0" class="headerlink" title="DOM Level 0"></a>DOM Level 0</h2><p><code>onclick</code> <code>onerror</code> <code>onload</code> <code>onmouseenter</code></p>
<p>html 写法 要加括号</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">onclick = fn()   <span class="comment">//fn 类型为字符串</span></span><br></pre></td></tr></table></figure>

<p>js 写法 不能加括号，调用是时候才加</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">X.onclick = fn    <span class="comment">//fn 类型为函数对象</span></span><br></pre></td></tr></table></figure>

<hr>

<h2 id="DOM-Level-1"><a href="#DOM-Level-1" class="headerlink" title="DOM Level 1"></a>DOM Level 1</h2><hr>

<h2 id="DOM-Level-2-（最广泛）"><a href="#DOM-Level-2-（最广泛）" class="headerlink" title="DOM Level 2  （最广泛）"></a>DOM Level 2  （最广泛）</h2><p>（2000/11/13） </p>
<ul>
<li><code>addEventListener</code> <code>removeEventListener</code></li>
<li>事件冒泡，事件捕获</li>
</ul>
<p><code>addEventListener</code> 可以添加多个 click 方法（队列，先进先出）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 先打印1，再打印2</span></span><br><span class="line">xx.addEventListener(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">&#125;)</span><br><span class="line">xx.addEventListener(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<p><code>onclick</code>,属性，唯一（工作中，可能别人也用了<code>onclick</code>，可能会把别人的覆盖）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 只打印2，后面`onclick`的把前面的覆盖了</span></span><br><span class="line">xx.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line">xx.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<h3 id="DOM-Events（先事件捕获，绑定同一对象按代码先后顺序，最后事件冒泡）"><a href="#DOM-Events（先事件捕获，绑定同一对象按代码先后顺序，最后事件冒泡）" class="headerlink" title="DOM Events（先事件捕获，绑定同一对象按代码先后顺序，最后事件冒泡）"></a>DOM Events（先事件捕获，绑定同一对象按代码先后顺序，最后事件冒泡）</h3><p>注：jQuery 不支持设置 true或false</p>
<h4 id="事件冒泡（从里到外）"><a href="#事件冒泡（从里到外）" class="headerlink" title="事件冒泡（从里到外）"></a>事件冒泡（从里到外）</h4><blockquote>
<p><code>false</code> 或者 <code>不填</code></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 点击 里</span></span><br><span class="line">外.addEventListener(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"外"</span>)</span><br><span class="line">&#125;)</span><br><span class="line">中.addEventListener(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"中"</span>)</span><br><span class="line">&#125;)</span><br><span class="line">里.addEventListener(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"里"</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 里</span></span><br><span class="line"><span class="comment">// 中</span></span><br><span class="line"><span class="comment">// 外</span></span><br></pre></td></tr></table></figure>

<h4 id="事件捕获（从外到里）"><a href="#事件捕获（从外到里）" class="headerlink" title="事件捕获（从外到里）"></a>事件捕获（从外到里）</h4><blockquote>
<p>多加了一个参数 <code>true</code></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 点击 里 </span></span><br><span class="line">外.addEventListener(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"外"</span>)</span><br><span class="line">&#125;,<span class="literal">true</span>)</span><br><span class="line">中.addEventListener(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"中"</span>)</span><br><span class="line">&#125;,<span class="literal">true</span>)</span><br><span class="line">里.addEventListener(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"里"</span>)</span><br><span class="line">&#125;,<span class="literal">true</span>)</span><br><span class="line"><span class="comment">// 外</span></span><br><span class="line"><span class="comment">// 中</span></span><br><span class="line"><span class="comment">// 里</span></span><br></pre></td></tr></table></figure>

<h4 id="如果同一个事件，绑定了2次，那么就按-先后顺序执行，true，false-失效"><a href="#如果同一个事件，绑定了2次，那么就按-先后顺序执行，true，false-失效" class="headerlink" title="如果同一个事件，绑定了2次，那么就按 先后顺序执行，true，false 失效"></a>如果同一个事件，绑定了2次，那么就按 先后顺序执行，true，false 失效</h4><p><a href="https://jsbin.com/zuqakoxive/edit?html,js,console,output" target="_blank" rel="noopener"><font color="#0F88EB">先事件捕获，再绑定同一对象按代码先后顺序，最后事件冒泡</font></a></p>
<hr>

<h3 id="点击别处关闭浮层"><a href="#点击别处关闭浮层" class="headerlink" title="点击别处关闭浮层"></a>点击别处关闭浮层</h3><ul>
<li><code>stopPropagation()</code>  阻止传播</li>
<li><code>one(&#39;click&#39;,function..)</code>  只监听一次</li>
</ul>
<blockquote>
<h3 id="JS（document-随时被监听，如果-popover-有很多，则不节省内存）"><a href="#JS（document-随时被监听，如果-popover-有很多，则不节省内存）" class="headerlink" title="JS（document 随时被监听，如果 popover 有很多，则不节省内存）"></a>JS（document 随时被监听，如果 popover 有很多，则不节省内存）</h3><p><a href="https://jsbin.com/jiwosacihu/edit?js,console,output" target="_blank" rel="noopener">查看完整代码</a></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">btn.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'点击btn'</span>)</span><br><span class="line">    popover.style.display = <span class="string">'block'</span></span><br><span class="line">&#125;)</span><br><span class="line">wrapper.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'点击wrapper'</span>)</span><br><span class="line">    e.stopPropagation() <span class="comment">// 阻止外部传播进来，所以在 document 被点击的时候，wrapper 里面不受影响</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'点击document'</span>)</span><br><span class="line">    popover.style.display = <span class="string">'none'</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<blockquote>
<h3 id="JQ（仅仅需要在-popover-show-出来后监听一次，节省内存"><a href="#JQ（仅仅需要在-popover-show-出来后监听一次，节省内存" class="headerlink" title="JQ（仅仅需要在 popover show() 出来后监听一次，节省内存)"></a>JQ（仅仅需要在 popover show() 出来后监听一次，节省内存)</h3><p> <code>stopPropagation()</code>和 <code>setTimeout()</code> 这两种方法实现<br><a href="https://jsbin.com/jowifuxevu/edit?js,console,output" target="_blank" rel="noopener">查看stopPropagation()方法完整代码</a><br><a href="https://jsbin.com/xebopujuvi/edit?js,console,output" target="_blank" rel="noopener">查看setTimeout()方法完整代码</a></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方法一 stopPropagation</span></span><br><span class="line"><span class="comment">// 点击 btn，先后打印 '点击btn' '点击wrapper'，同时 popover 也会出现，</span></span><br><span class="line"><span class="comment">// 这时候就开始监听一次 document 的点击事件，点击别处，popover 会隐藏。</span></span><br><span class="line">&#123;</span><br><span class="line">    $(btn).on(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'点击btn'</span>)</span><br><span class="line">        $(popover).show()</span><br><span class="line">        $(<span class="built_in">document</span>).one(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">//只执行一次</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'点击document'</span>)</span><br><span class="line">            $(popover).hide()</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">    $(wrapper).on(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'点击wrapper'</span>)</span><br><span class="line">        e.stopPropagation()</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="comment">// 方法二 用 setTimeout，就不需要 stopPropagation 了；</span></span><br><span class="line"><span class="comment">// 点击 btn，打印 '点击btn'，同时 popover 也会出现，</span></span><br><span class="line"><span class="comment">// 这时候就开始监听一次 document 的点击事件，点击别处，popover 会隐藏。</span></span><br><span class="line">&#123;</span><br><span class="line">    $(btn).on(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'点击btn'</span>)</span><br><span class="line">        $(popover).show()</span><br><span class="line">        setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            $(<span class="built_in">document</span>).one(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; </span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'点击document'</span>)</span><br><span class="line">                $(popover).hide()</span><br><span class="line">            &#125;)  </span><br><span class="line">        &#125;,<span class="number">0</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/18/HTML常用标签/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="R.Y">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/dog.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="R.Y">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/18/HTML常用标签/" itemprop="url">HTML常用标签</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-18T16:43:34+08:00">
                2018-08-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="常见标签"><a href="#常见标签" class="headerlink" title="常见标签"></a>常见标签</h2><h3 id="1-iframe-标签"><a href="#1-iframe-标签" class="headerlink" title="1.iframe 标签"></a>1.iframe 标签</h3><p>HTML内联框架元素 <code>&lt;iframe&gt;</code> 表示嵌套的浏览上下文，有效地将另一个HTML页面嵌入到当前页面中。<br>iframe 需要和 a 元素一起用，iframe 的 name，和 a 里面的 target 是同一名字。<br>iframe 自带一个 border ，如果不需要的话，需要设置 frameborder = “0” 。<br><img src="/img/HTML%E5%B8%B8%E7%94%A8/1.png" alt="iframe"></p>
<h3 id="2-a-标签-（跳转页面，HTTP-GET-请求）"><a href="#2-a-标签-（跳转页面，HTTP-GET-请求）" class="headerlink" title="2.a 标签 （跳转页面，HTTP GET 请求）"></a>2.a 标签 （跳转页面，HTTP GET 请求）</h3><p><img src="/img/HTML%E5%B8%B8%E7%94%A8/2.png" alt="a"><br><img src="/img/HTML%E5%B8%B8%E7%94%A8/3.png" alt="a"><br><img src="/img/HTML%E5%B8%B8%E7%94%A8/4.png" alt="a"><br><img src="/img/HTML%E5%B8%B8%E7%94%A8/2.gif" alt="blank"><br><img src="/img/HTML%E5%B8%B8%E7%94%A8/3.gif" alt="self"><br><img src="/img/HTML%E5%B8%B8%E7%94%A8/4.gif" alt="parent"><br><img src="/img/HTML%E5%B8%B8%E7%94%A8/5.gif" alt="top"></p>
<h4 id="download-属性"><a href="#download-属性" class="headerlink" title="download 属性"></a>download 属性</h4><p>可以在 a 标签中加上 download 属性，或者把 content-type 设置为 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">content-type: application/octet-stream</span><br></pre></td></tr></table></figure>

<p><img src="/img/HTML%E5%B8%B8%E7%94%A8/9.png" alt="download"><br><img src="/img/HTML%E5%B8%B8%E7%94%A8/10.png" alt="download"></p>
<h4 id="href-属性"><a href="#href-属性" class="headerlink" title="href 属性"></a>href 属性</h4><p>如果 <code>&lt;a href=&quot;qq.com&quot;&gt;qq&lt;/a&gt;</code> 这样写，将不会跳转到 qq.com，因为这是一个相对地址，打开的其实是一个文件<br><img src="/img/HTML%E5%B8%B8%E7%94%A8/11.png" alt="qq.com"><br><img src="/img/HTML%E5%B8%B8%E7%94%A8/1.gif" alt="qq.com"></p>
<h5 id="1-a-标签的无协议绝对地址"><a href="#1-a-标签的无协议绝对地址" class="headerlink" title="1.a 标签的无协议绝对地址"></a>1.a 标签的无协议绝对地址</h5><p><img src="/img/HTML%E5%B8%B8%E7%94%A8/13.png" alt="//qq.com"><br><img src="/img/HTML%E5%B8%B8%E7%94%A8/7.gif" alt="//qq.com"></p>
<h3 id="http-server-使用"><a href="#http-server-使用" class="headerlink" title="http-server 使用"></a>http-server 使用</h3><p>一般我们不用 file 协议，<br>我们可以上传到 github 预览<br>或者下载一个工具，输入命令 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -g http-server</span><br></pre></td></tr></table></figure>

<p>然后</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http-server -c-1</span><br></pre></td></tr></table></figure>

<p><img src="/img/HTML%E5%B8%B8%E7%94%A8/12.png" alt="http-server"><br><img src="/img/HTML%E5%B8%B8%E7%94%A8/6.gif" alt="http://127.0.0.1:8080"></p>
<h5 id="2-ddd-锚点不发请求-lt-a-href-quot-quot-gt-lt-a-gt-，会跳到页面顶部，-lt-a-href-quot-quot-gt-lt-a-gt-，会刷新页面"><a href="#2-ddd-锚点不发请求-lt-a-href-quot-quot-gt-lt-a-gt-，会跳到页面顶部，-lt-a-href-quot-quot-gt-lt-a-gt-，会刷新页面" class="headerlink" title="2.#ddd 锚点不发请求(&lt;a href=&quot;#&quot;&gt;&lt;/a&gt;，会跳到页面顶部，&lt;a href=&quot;&quot;&gt;&lt;/a&gt;，会刷新页面)"></a>2.<code>#ddd</code> 锚点不发请求(<code>&lt;a href=&quot;#&quot;&gt;&lt;/a&gt;</code>，会跳到页面顶部，<code>&lt;a href=&quot;&quot;&gt;&lt;/a&gt;</code>，会刷新页面)</h5><p><img src="/img/HTML%E5%B8%B8%E7%94%A8/14.png" alt="#ddd.html"><br><img src="/img/HTML%E5%B8%B8%E7%94%A8/8.gif" alt="#ddd.html"></p>
<h5 id="3-ddd-其他的都会发起请求"><a href="#3-ddd-其他的都会发起请求" class="headerlink" title="3.?ddd 其他的都会发起请求"></a>3.<code>?ddd</code> 其他的都会发起请求</h5><p><img src="/img/HTML%E5%B8%B8%E7%94%A8/15.png" alt="?ddd.html"><br><img src="/img/HTML%E5%B8%B8%E7%94%A8/9.gif" alt="?ddd.html"></p>
<h5 id="4-javascript-伪协议-lt-a-href-quot-javascript-quot-gt-lt-a-gt-，"><a href="#4-javascript-伪协议-lt-a-href-quot-javascript-quot-gt-lt-a-gt-，" class="headerlink" title="4.javascript:; 伪协议(&lt;a href=&quot;javascript:;&quot;&gt;&lt;/a&gt;，)"></a>4.<code>javascript:;</code> 伪协议(<code>&lt;a href=&quot;javascript:;&quot;&gt;&lt;/a&gt;</code>，)</h5><p><img src="/img/HTML%E5%B8%B8%E7%94%A8/11.gif" alt="javascript:; 点击却不进行操作"></p>
<p><img src="/img/HTML%E5%B8%B8%E7%94%A8/16.png" alt="javascript: alert(1);"><br><img src="/img/HTML%E5%B8%B8%E7%94%A8/10.gif" alt="javascript: alert(1);点击弹窗"></p>
<h2 id="3-form-标签-（跳转页面，HTTP-POST-请求）"><a href="#3-form-标签-（跳转页面，HTTP-POST-请求）" class="headerlink" title="3.form 标签 （跳转页面，HTTP POST 请求）"></a>3.form 标签 （跳转页面，HTTP POST 请求）</h2><p><code>form</code> 标签里面如果没有 <code>&lt;input type=&quot;submit&quot;&gt;</code> 则无法提交，除非 <code>&lt;button&gt;&lt;/button&gt;</code>不设置 <code>type</code> ，那么 <code>button</code> 按钮会自动升级为 <code>submit</code> 。<br><img src="/img/HTML%E5%B8%B8%E7%94%A8/17.png" alt=" "><br><img src="/img/HTML%E5%B8%B8%E7%94%A8/12.gif" alt="POST"></p>
<p>现在我们来提交一些东西（如果是中文的话，都会被转义为 utf-8 ，http 是明文上传，https 则会被加密）<br><img src="/img/HTML%E5%B8%B8%E7%94%A8/18.png" alt=" "><br><img src="/img/HTML%E5%B8%B8%E7%94%A8/13.gif" alt="出现第四部分"></p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>GET 会默认把请求放进 <code>查询参数</code> ，POST 会默认把请求放入 <code>第四部分</code>（form data），我们可以通过 <img src="/img/HTML%E5%B8%B8%E7%94%A8/19.png" alt="?sss">,让 POST 也有 <code>查询参数</code> <img src="/img/HTML%E5%B8%B8%E7%94%A8/20.png" alt=" ">，但是，我们没办法让 GET 请求有 <code>第四部分</code>。</p>
<h2 id="4-input-标签"><a href="#4-input-标签" class="headerlink" title="4.input 标签"></a>4.input 标签</h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/input" target="_blank" rel="noopener">input 详情</a></p>
<h4 id="button"><a href="#button" class="headerlink" title="button"></a>button</h4><p><code>&lt;button&gt;&lt;/button&gt;</code>不设置 type ，则 button 会被自动升级为 submit 。</p>
<h4 id="checkbox-多选"><a href="#checkbox-多选" class="headerlink" title="checkbox 多选"></a>checkbox 多选</h4><p>加上 label 标签，那么我们可以点击 “哈哈” 就能选中。（input 的 id ，需要跟 label 的 for 名字相对应）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">喜欢的水果</span><br><span class="line">&lt;label <span class="keyword">for</span>=<span class="string">"xxx"</span>&gt;苹果&lt;/label&gt;&lt;input <span class="built_in">type</span>=<span class="string">"checkbox"</span> value=<span class="string">"apple"</span> id=<span class="string">"xxx"</span> name=<span class="string">"fruit"</span>&gt;</span><br></pre></td></tr></table></figure>

<p>还可以更简单，直接用 label 标签包裹，如下（可以不写 id 和 for，但是要写 name）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;label&gt;橘子&lt;input <span class="built_in">type</span>=<span class="string">"checkbox"</span> value=<span class="string">"orange"</span> name=<span class="string">"fruit"</span>&gt;&lt;/label&gt;</span><br><span class="line">&lt;label&gt;香蕉&lt;input <span class="built_in">type</span>=<span class="string">"checkbox"</span> value=<span class="string">"banana"</span> name=<span class="string">"fruit"</span>&gt;&lt;/label&gt;</span><br></pre></td></tr></table></figure>

<p>同样适用于 type=”text”</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;label <span class="keyword">for</span>=<span class="string">"yyy"</span>&gt;哈哈&lt;/label&gt;&lt;input <span class="built_in">type</span>=<span class="string">"text"</span> id=<span class="string">"yyy"</span> name=<span class="string">"y"</span>&gt;</span><br></pre></td></tr></table></figure>

<p><img src="/img/HTML%E5%B8%B8%E7%94%A8/21.png" alt="checkbox"><br><img src="/img/HTML%E5%B8%B8%E7%94%A8/14.gif" alt="checkbox"></p>
<h4 id="radio-单选"><a href="#radio-单选" class="headerlink" title="radio 单选"></a>radio 单选</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;label&gt;喜欢&lt;input <span class="built_in">type</span>=<span class="string">"checkbox"</span> value=<span class="string">"like"</span> name=<span class="string">"loveme"</span>&gt;&lt;/label&gt;</span><br><span class="line">&lt;label&gt;不喜欢&lt;input <span class="built_in">type</span>=<span class="string">"checkbox"</span> value=<span class="string">"dislike"</span> name=<span class="string">"loveme"</span>&gt;&lt;/label&gt;</span><br></pre></td></tr></table></figure>

<p><img src="/img/HTML%E5%B8%B8%E7%94%A8/15.gif" alt="radio"></p>
<h2 id="5-select-下拉栏"><a href="#5-select-下拉栏" class="headerlink" title="5.select 下拉栏"></a>5.select 下拉栏</h2><p>select 里面 multiple 表示多选，可以按住 ctrl 进行多选，option 里面 disabled 表示不可选，selected 表示默认选择。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;select name=<span class="string">"group"</span> multiple&gt;</span><br><span class="line">	&lt;option value=<span class="string">"1"</span>&gt;足球&lt;/option&gt;</span><br><span class="line">	&lt;option value=<span class="string">"2"</span>&gt;篮球&lt;/option&gt;</span><br><span class="line">	&lt;option value=<span class="string">"3"</span> disabled&gt;乒乓球&lt;/option&gt;</span><br><span class="line">	&lt;option value=<span class="string">"4"</span> selected&gt;&lt;/select&gt;&gt;羽毛球&lt;/option&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<p><img src="/img/HTML%E5%B8%B8%E7%94%A8/16.gif" alt="select"></p>
<h2 id="6-textarea"><a href="#6-textarea" class="headerlink" title="6.textarea"></a>6.textarea</h2><p>resize:none 表示不能拉伸区域了，除了 width ，height 可以设置大小，还可以用 col row 设置。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;textarea style=<span class="string">"resize: none; width: 200px; height: 200px"</span>&gt;&lt;/textarea&gt;</span><br></pre></td></tr></table></figure>

<h2 id="7-table"><a href="#7-table" class="headerlink" title="7.table"></a>7.table</h2><p>可以用 colgroup 里面的 col width 设置每列的 宽度</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;table border=<span class="string">"1"</span>&gt;</span><br><span class="line">	&lt;colgroup&gt;</span><br><span class="line">		&lt;col width=<span class="string">"100"</span>&gt;</span><br><span class="line">		&lt;col width=<span class="string">"200"</span>&gt;</span><br><span class="line">		&lt;col width=<span class="string">"100"</span>&gt;</span><br><span class="line">		&lt;col width=<span class="string">"70"</span>&gt;</span><br><span class="line">	&lt;/colgroup&gt;</span><br><span class="line">	&lt;thead&gt;</span><br><span class="line">		&lt;tr&gt;</span><br><span class="line">			&lt;th&gt;科目&lt;/th&gt;&lt;th&gt;姓名&lt;/th&gt;&lt;th&gt;班级&lt;/th&gt;&lt;th&gt;分数&lt;/th&gt;</span><br><span class="line">		&lt;/tr&gt;</span><br><span class="line">	&lt;/thead&gt;</span><br><span class="line">	&lt;tbody&gt;</span><br><span class="line">		&lt;tr&gt;</span><br><span class="line">			&lt;th&gt;语文&lt;/th&gt;&lt;td&gt;小明&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;90&lt;/td&gt;</span><br><span class="line">		&lt;/tr&gt;</span><br><span class="line">		&lt;tr&gt;</span><br><span class="line">			&lt;th&gt;语文&lt;/th&gt;&lt;td&gt;小红&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;100&lt;/td&gt;</span><br><span class="line">		&lt;/tr&gt;</span><br><span class="line">		&lt;tr&gt;</span><br><span class="line">			&lt;th&gt;总分&lt;/th&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;190&lt;/td&gt;</span><br><span class="line">		&lt;/tr&gt;</span><br><span class="line">		&lt;tr&gt;</span><br><span class="line">			&lt;th&gt;平均分&lt;/th&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;95&lt;/td&gt;</span><br><span class="line">		&lt;/tr&gt;</span><br><span class="line">	&lt;/tbody&gt;</span><br><span class="line">	&lt;tfoot&gt;</span><br><span class="line">	&lt;/tfoot&gt;</span><br><span class="line">&lt;/table&gt;</span><br></pre></td></tr></table></figure>

<p><img src="/img/HTML%E5%B8%B8%E7%94%A8/22.png" alt="table"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/05/实现一个jQuery的API/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="R.Y">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/dog.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="R.Y">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/05/实现一个jQuery的API/" itemprop="url">实现一个jQuery的API</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-05T17:16:54+08:00">
                2018-08-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>可以把它看做是一个对象，然后用里面的方法</p>
<p>接受一个旧的 节点（字符串或节点/选择器），返回一个新的 拥有很多方法的对象</p>
<p>所以jQuery`实质上是一个构造函数，接受一个参数，这个参数可能是节点，然后返回一个方法对象去操作这个节点。</p>
<h3 id="HTML内容"><a href="#HTML内容" class="headerlink" title="HTML内容"></a>HTML内容</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-class">.red</span>&#123;</span></span><br><span class="line">  color: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.blue</span>&#123;</span></span><br><span class="line">  color: blue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"item1"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"item2"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"item3"</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"item4"</span>&gt;</span>4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"item5"</span>&gt;</span>5<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/jquery/3.3.1/jquery.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"test.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="JS内容"><a href="#JS内容" class="headerlink" title="JS内容"></a>JS内容</h3><p>实现添加 class，还有 设置 或者 获取text 内容的功能</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.jQuery = <span class="function"><span class="keyword">function</span>(<span class="params">nodeOrSelector</span>)</span>&#123; <span class="comment">//先用一个函数将以下内容包裹，防止污染</span></span><br><span class="line">	<span class="keyword">let</span> nodes = &#123;&#125; <span class="comment">//声明一个数组</span></span><br><span class="line">	<span class="keyword">if</span>(<span class="keyword">typeof</span> nodeOrSelector === <span class="string">'string'</span>)&#123; <span class="comment">//如果 nodeOrSelector 是一个 `string`</span></span><br><span class="line">		<span class="keyword">let</span> temp = <span class="built_in">document</span>.querySelectorAll(nodeOrSelector) <span class="comment">//伪数组</span></span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;temp.length;i++)&#123; <span class="comment">//遍历这个伪数组</span></span><br><span class="line">			nodes[i] = temp[i]</span><br><span class="line">		&#125;</span><br><span class="line">		nodes.length = temp.length <span class="comment">//使得该伪数组按顺序排序</span></span><br><span class="line">	&#125;<span class="keyword">else</span> <span class="keyword">if</span>(nodeOrSelector <span class="keyword">instanceof</span> Node)&#123; <span class="comment">//如果 nodeOrSelector 是一个 `Node`</span></span><br><span class="line">		nodes = &#123;<span class="number">0</span>:nodeOrSelector,<span class="attr">length</span>:<span class="number">1</span>&#125; <span class="comment">//我们要让该 Node 和上面的格式保持一致</span></span><br><span class="line">	&#125;</span><br><span class="line"><span class="comment">//实现添加 class</span></span><br><span class="line">	nodes.addClass = <span class="function"><span class="keyword">function</span>(<span class="params">classes</span>)</span>&#123;</span><br><span class="line">		classes.forEach(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;nodes.length;i++)&#123;</span><br><span class="line">				nodes[i].classList.add(value)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;</span><br><span class="line"><span class="comment">//设置 或者 获取text 内容</span></span><br><span class="line">	nodes.text = <span class="function"><span class="keyword">function</span>(<span class="params">text</span>)</span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(text === <span class="literal">undefined</span>)&#123; <span class="comment">//如果 text 没有给参数，那就直接输出 text 原有的值</span></span><br><span class="line">			<span class="keyword">var</span> texts = []</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;nodes.length;i++)&#123;</span><br><span class="line">				texts.push(nodes[i].textContent)</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">return</span> texts</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;nodes.length;i++)&#123;</span><br><span class="line">				nodes[i].textContent = text <span class="comment">//否则就输出给的值</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> nodes</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> node3 = jQuery(<span class="string">'ul &gt; li'</span>) <span class="comment">//获取li</span></span><br><span class="line">node3.addClass([<span class="string">'blue'</span>]) <span class="comment">//给 li 添加 class-&gt;blue</span></span><br><span class="line">node3.text() <span class="comment">//输出li的text</span></span><br></pre></td></tr></table></figure>

<h5 id><a href="#" class="headerlink" title></a></h5><ul>
<li><code>.addClass(className)</code></li>
<li><code>removeClass(className)</code></li>
<li><code>toggleClass(className)</code> 开关</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/24/js零碎笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="R.Y">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/dog.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="R.Y">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/24/js零碎笔记/" itemprop="url">js零碎笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-24T18:42:40+08:00">
                2018-07-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="setTimeout"><a href="#setTimeout" class="headerlink" title="setTimeout()"></a><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/setTimeout" target="_blank" rel="noopener">setTimeout()</a></h3><p><code>setTimeout()</code> 是一个定时器，设置时间后，定时器到期就执行一个函数或者指定的一段代码。</p>
<h4 id="html代码"><a href="#html代码" class="headerlink" title="html代码"></a><code>html</code>代码</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn"</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="js代码"><a href="#js代码" class="headerlink" title="js代码"></a><code>js</code>代码</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">'btn'</span>)</span><br><span class="line">	btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		setTimeout(<span class="string">"alert('3 seconds!')"</span>,<span class="number">3000</span>)</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<h5 id="效果如下"><a href="#效果如下" class="headerlink" title="效果如下"></a>效果如下</h5><p><img src="/img/js%E8%AE%B0%E5%BD%95/1.gif" alt="setTimeout(),点击3秒后弹窗"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/19/js的原型和原型链/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="R.Y">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/dog.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="R.Y">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/19/js的原型和原型链/" itemprop="url">js的原型和原型链</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-19T19:04:23+08:00">
                2018-07-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="原型和原型链"><a href="#原型和原型链" class="headerlink" title="原型和原型链"></a>原型和原型链</h2><h3 id="原型是Javascript中的继承的基础，JavaScript的继承就是基于原型的继承。"><a href="#原型是Javascript中的继承的基础，JavaScript的继承就是基于原型的继承。" class="headerlink" title="原型是Javascript中的继承的基础，JavaScript的继承就是基于原型的继承。"></a>原型是Javascript中的继承的基础，JavaScript的继承就是基于原型的继承。</h3><h4 id="我用一些简单的公式图来理解下"><a href="#我用一些简单的公式图来理解下" class="headerlink" title="我用一些简单的公式图来理解下"></a>我用一些简单的公式图来理解下</h4><p><img src="/img/js%E5%8E%9F%E5%9E%8B/1.png" alt="Number()"><br><img src="/img/js%E5%8E%9F%E5%9E%8B/2.png" alt="__proto__"><br><img src="/img/js%E5%8E%9F%E5%9E%8B/3.png" alt="obj()"><br><img src="/img/js%E5%8E%9F%E5%9E%8B/4.png" alt="obj()"></p>
<h3 id="Objtct-prototype-里面的-prototype-就是-Object-的-共有属性（也就是原型）。"><a href="#Objtct-prototype-里面的-prototype-就是-Object-的-共有属性（也就是原型）。" class="headerlink" title="Objtct.prototype ,里面的 prototype 就是 Object 的 共有属性（也就是原型）。"></a><code>Objtct.prototype</code> ,里面的 <code>prototype</code> 就是 <code>Object</code> 的 <code>共有属性</code>（也就是原型）。</h3><h5 id="Number-String-Boolean"><a href="#Number-String-Boolean" class="headerlink" title="Number, String, Boolean"></a>Number, String, Boolean</h5><p><code>n</code> 的 <code>toString</code> 和 <code>valueOf</code> 属性在 <code>n.__proto__.__proto__</code>里面（如图2中的红圈和蓝圈）。在第一层的 <code>__proto__</code> 中，<code>toFixed,toLocaleString,toString</code>是 <code>Number</code> 的私有属性; 而公共属性<code>toString</code> 和 <code>valueOf</code>，在 <code>Number</code> 的 第二层 <code>__proto__</code> 中；所以想要获取公共属性<code>toString</code> 和 <code>valueOf</code>，则<code>n.__proto__.__proto__.toString</code>(如图1);除了 <code>Number</code>，还有<code>String</code>，<code>Boolean</code> 也有二层 <code>__proto__</code> 中。</p>
<h5 id="Object"><a href="#Object" class="headerlink" title="Object"></a>Object</h5><p>而 <code>obj</code> 的 <code>toString</code> 和 <code>valueOf</code> 属性在 <code>obj.__proto__</code> 里面（如图3中的红圈），也可以直接用 <code>obj.toString</code> 表示 <code>obj.__proto__.toString</code> 。</p>
<h3 id="原型链是实现继承的主要方法。其基本思想是：利用原型让一个引用类型继承另一个应用类型的属性和方法。"><a href="#原型链是实现继承的主要方法。其基本思想是：利用原型让一个引用类型继承另一个应用类型的属性和方法。" class="headerlink" title="原型链是实现继承的主要方法。其基本思想是：利用原型让一个引用类型继承另一个应用类型的属性和方法。"></a>原型链是实现继承的主要方法。其基本思想是：利用原型让一个引用类型继承另一个应用类型的属性和方法。</h3><p>如下图<br><img src="/img/js%E5%8E%9F%E5%9E%8B/5.png" alt="总结"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/16/js里的数据类型转换/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="R.Y">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/dog.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="R.Y">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/16/js里的数据类型转换/" itemprop="url">js里的数据类型转换</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-16T23:03:00+08:00">
                2018-07-16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h2><h3 id="任意类型-转-字符串"><a href="#任意类型-转-字符串" class="headerlink" title="任意类型 转 字符串"></a>任意类型 转 字符串</h3><h4 id="1、String-x"><a href="#1、String-x" class="headerlink" title="1、String(x)"></a>1、String(x)</h4><p><img src="/img/js%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/1.png" alt="String(x)"></p>
<h4 id="2、x-toString"><a href="#2、x-toString" class="headerlink" title="2、x.toString()"></a>2、x.toString()</h4><p><img src="/img/js%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/2.png" alt="x.toString()"></p>
<h4 id="3、x-39-39"><a href="#3、x-39-39" class="headerlink" title="3、x+&#39;&#39;"></a>3、x+<code>&#39;&#39;</code></h4><p><img src="/img/js%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/3.png" alt="x+&#39;&#39;"></p>
<h3 id="任意类型-转-数字"><a href="#任意类型-转-数字" class="headerlink" title="任意类型 转 数字"></a>任意类型 转 数字</h3><p>1、Number(x)<br>2、parseInt(x, 10)<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/parseInt" target="_blank" rel="noopener">MDN</a><br>3、parseFloat(x)<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/parseFloat" target="_blank" rel="noopener">MDN</a><br>4、x - 0<br>5、+x</p>
<h3 id="任意类型转布尔"><a href="#任意类型转布尔" class="headerlink" title="任意类型转布尔"></a>任意类型转布尔</h3><p>1、Boolean(x)<br>2、!!x</p>
<h2 id="内存图"><a href="#内存图" class="headerlink" title="内存图"></a>内存图</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line"><span class="keyword">var</span> b = a</span><br><span class="line">b = <span class="number">2</span></span><br><span class="line">请问 a 显示是几？</span><br></pre></td></tr></table></figure>

<p><img src="/img/js%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/4.png" alt="a=1"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;<span class="attr">name</span>: <span class="string">'a'</span>&#125;</span><br><span class="line"><span class="keyword">var</span> b = a</span><br><span class="line">b = &#123;<span class="attr">name</span>: <span class="string">'b'</span>&#125;</span><br><span class="line">请问现在 a.name 是多少？</span><br></pre></td></tr></table></figure>

<p><img src="/img/js%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/5.png" alt="a.name = &#39;a&#39;"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;<span class="attr">name</span>: <span class="string">'a'</span>&#125;</span><br><span class="line"><span class="keyword">var</span> b = a</span><br><span class="line">b.name = <span class="string">'b'</span></span><br><span class="line">请问现在 a.name 是多少？</span><br></pre></td></tr></table></figure>

<p><img src="/img/js%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/6.png" alt="a.name = &#39;b&#39;"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;<span class="attr">name</span>: <span class="string">'a'</span>&#125;</span><br><span class="line"><span class="keyword">var</span> b = a</span><br><span class="line">b = <span class="literal">null</span></span><br><span class="line">请问现在 a 是什么？</span><br></pre></td></tr></table></figure>

<p><img src="/img/js%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/7.png" alt="a = {name: &#39;a&#39;}"></p>
<h2 id="深复制-VS-浅复制"><a href="#深复制-VS-浅复制" class="headerlink" title="深复制 VS 浅复制"></a>深复制 VS 浅复制</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line"><span class="keyword">var</span> b = a</span><br><span class="line">b = <span class="number">2</span> <span class="comment">//这个时候改变 b</span></span><br><span class="line"><span class="comment">//a 完全不受 b 的影响</span></span><br><span class="line"><span class="comment">//那么我们就说这是一个深复制</span></span><br></pre></td></tr></table></figure>

<p>对于简单类型的数据来说，赋值就是深拷贝。<br>对于复杂类型的数据（对象）来说，才要区分浅拷贝和深拷贝。</p>
<p>这是一个浅拷贝的例子</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;<span class="attr">name</span>: <span class="string">'frank'</span>&#125;</span><br><span class="line"><span class="keyword">var</span> b = a</span><br><span class="line">b.name = <span class="string">'b'</span></span><br><span class="line">a.name === <span class="string">'b'</span> <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>因为我们对 b 操作后，a 也变了</p>
<p>什么是深拷贝了，就是对 Heap 内存进行完全的拷贝。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;<span class="attr">name</span>: <span class="string">'frank'</span>&#125;</span><br><span class="line"><span class="keyword">var</span> b = deepClone(a) <span class="comment">// deepClone 还不知道怎么实现</span></span><br><span class="line">b.name = <span class="string">'b'</span></span><br><span class="line">a.name === <span class="string">'a'</span> <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/dog.gif" alt="R.Y">
            
              <p class="site-author-name" itemprop="name">R.Y</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">25</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">R.Y</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
